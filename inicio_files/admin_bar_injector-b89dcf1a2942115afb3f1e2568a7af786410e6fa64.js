!function(){var e=function(e){var t={exports:{}};return e.call(t.exports,t,t.exports),t.exports},s=function(){function r(e,t){for(var i=0;i<t.length;i++){var r=t[i];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(e,t,i){return t&&r(e.prototype,t),i&&r(e,i),e}}(),f=function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")},o=function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)},u=function a(e,t,i){null===e&&(e=Function.prototype);var r=Object.getOwnPropertyDescriptor(e,t);if(r===undefined){var n=Object.getPrototypeOf(e);return null===n?undefined:a(n,t,i)}if("value"in r)return r.value;var o=r.get;return o===undefined?undefined:o.call(i)},h=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t},r=function(e){return e&&e.__esModule?e:{"default":e}},d=e(function(e,t){"use strict";function i(e,t){!(1<arguments.length&&t!==undefined)||arguments[1]?window.open(e,"adminBarWindow"):window.location.assign(e)}function r(){window.location.reload()}Object.defineProperty(t,"__esModule",{value:!0}),t.redirectToUrl=i,t.refreshPage=r;var n=function(){function o(e){var t=e.targetNode,i=e.iframeRoot,r=e.iframeSrc,n=e.permanentDomain;f(this,o),this.targetNode=t,this.iframeRoot=i,this.iframeSrc=r,this.permanentDomain=n}return s(o,[{key:"createIframe",value:function i(e,t){this.iframe=document.createElement("iframe"),this.iframe.setAttribute("title",e),this.iframe.setAttribute("id",t),this.iframe.setAttribute("src",this.iframeSrc),this.iframe.setAttribute("sandbox","allow-same-origin allow-scripts"),this.iframe.setAttribute("style",this.loadingStyles),this.targetNode.appendChild(this.iframe),this.target=this.iframe.contentWindow}}],[{key:"convertStylesObjectToString",value:function e(t){return Object.keys(t).map(function(e){return e+": "+t[e]+";"}).join(" ")}},{key:"returnObjectValues",value:function r(t){return Object.keys(t).map(function(e){return t[e]})}}]),o}();t["default"]=n});e(function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=function(e){function a(e){var t=e.targetNode,i=e.iframeSrc,r=e.permanentDomain;f(this,a);var n=h(this,(a.__proto__||Object.getPrototypeOf(a)).call(this,{targetNode:t,iframeSrc:i,permanentDomain:r}));return n.POST_MESSAGE_ACTIONS={TOGGLE_BAR:"toggle_bar",SET_IFRAME_HEIGHT:"set_iframe_height",REDIRECT_TO_URL:"redirect_to_url",SET_INITIAL_STATE:"set_initial_state",OPEN_POPOVER:"open_popover",CLOSE_POPOVER:"close_popover",TEMPLATE_EDITOR_REFRESH_PAGE:'{"key":"pageRefresh"}'},n.loadingStyles=a.convertStylesObjectToString({position:"fixed",border:"none"}),n.defaultStyles=a.convertStylesObjectToString({position:"fixed",bottom:0,left:0,"z-index":2147483647,width:"100%",height:"auto",border:"none"}),n.collapsedStyles=a.convertStylesObjectToString({position:"fixed",bottom:0,left:0,"z-index":2147483647,width:"80px",height:"80px",border:"none"}),n.popoverOpenStyles=a.convertStylesObjectToString({position:"fixed",bottom:0,left:0,"z-index":2147483647,width:"100%",height:"100vh",border:"none"}),n}return o(a,e),s(a,[{key:"init",value:function t(){this.postMessageBuffer=this.postMessageBuffer.bind(this),this.setInitialState=this.setInitialState.bind(this),u(a.prototype.__proto__||Object.getPrototypeOf(a.prototype),"createIframe",this).call(this,"Shopify Admin Bar","admin-bar-iframe"),this.target=this.iframe.contentWindow,window.addEventListener("message",this.postMessageBuffer)}},{key:"teardown",value:function i(){window.removeEventListener("message",this.postMessageBuffer),window.removeEventListener("DOMContentLoaded",this.setInitialState)}},{key:"setInitialState",value:function r(){this.isCollapsed?this.iframe.setAttribute("style",this.collapsedStyles):this.iframe.setAttribute("style",this.defaultStyles)}},{key:"postMessageBuffer",value:function l(e){var t=e.data.action||e.data,i=e.data,r=i.height,n=i.url,o=i.isCollapsed,s=e.origin;!t||a.returnObjectValues(this.POST_MESSAGE_ACTIONS).indexOf(t)<0||s!=="https://"+this.permanentDomain||(t!==this.POST_MESSAGE_ACTIONS.SET_IFRAME_HEIGHT||r)&&this.postMessageHandler(t,r,n,o)}},{key:"postMessageHandler",value:function n(e,t,i,r){e===this.POST_MESSAGE_ACTIONS.TOGGLE_BAR?this.isCollapsed?(this.isCollapsed=!1,this.iframe.setAttribute("style",this.defaultStyles),this.iframe.style.height=this.heightBeforeCollapse):(this.isCollapsed=!0,this.heightBeforeCollapse=this.iframe.style.height,this.iframe.setAttribute("style",this.collapsedStyles)):e===this.POST_MESSAGE_ACTIONS.SET_IFRAME_HEIGHT&&null!=t?this.iframe.style.height=t+"px":e===this.POST_MESSAGE_ACTIONS.REDIRECT_TO_URL&&null!=i?(0,d.redirectToUrl)(i):e===this.POST_MESSAGE_ACTIONS.OPEN_POPOVER?this.iframe.setAttribute("style",this.popoverOpenStyles):e===this.POST_MESSAGE_ACTIONS.CLOSE_POPOVER?this.iframe.setAttribute("style",this.defaultStyles):e===this.POST_MESSAGE_ACTIONS.SET_INITIAL_STATE?r?(this.isCollapsed=!0,this.iframe.setAttribute("style",this.collapsedStyles)):(this.isCollapsed=!1,this.iframe.setAttribute("style",this.defaultStyles)):e===this.POST_MESSAGE_ACTIONS.TEMPLATE_EDITOR_REFRESH_PAGE&&(0,d.refreshPage)()}}]),a}(r(d)["default"]);t["default"]=i,Shopify.AdminBarInjector=null!=t["default"]?t["default"]:t})}("undefined"!=typeof global?global:"undefined"!=typeof window&&window);